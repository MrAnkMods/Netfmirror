<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>NMix — Home</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root {
    --bg: #000;
    --card: #111;
    --accent: #ffffff;
    --muted: #8a8a8a;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,Arial,Helvetica,sans-serif;
    background:var(--bg);
    color:#fff;
  }

  /* ---- Header ---- */
  header{
    background:linear-gradient(180deg,#080808,rgba(0,0,0,.6));
    position:sticky;
    top:0;
    z-index:40;
    border-bottom:1px solid #111;
  }

  nav{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:10px 10px 10px 14px;
  }

  .brand{display:flex;align-items:center;gap:8px;}
  .brand .Nlogo{font-weight:900;color:#e50914;font-size:28px;}

  .nav-links{display:flex;align-items:center;gap:22px;}
  .nav-links a{color:#fff;text-decoration:none;font-weight:700;font-size:15px;padding:6px 8px;border-radius:6px;opacity:.95;}
  .nav-links a:hover{background:#111;}

  /* Search Box */
  .search-container{
    display:flex;
    align-items:center;
    gap:10px;
  }

  #searchInput{
    background:#111;
    border:1px solid #222;
    color:#fff;
    border-radius:6px;
    padding:6px 10px;
    width:150px;
    font-size:14px;
    display:none;
  }

  .search-btn{
    background:transparent;
    color:#fff;
    font-size:16px;
    font-weight:bold;
    border:none;
    cursor:pointer;
  }

  .profile{
    width:40px;
    height:40px;
    border-radius:8px;
    overflow:hidden;
    background:#111;
    display:flex;
    align-items:center;
    justify-content:center;
    margin-left:6px;
  }

  .profile img{
    width:40px;
    height:40px;
    object-fit:cover;
    border-radius:8px;
  }

  /* ---- Hero Section ---- */
  .container{padding:14px}
  .hero{position:relative;height:56vh;border-radius:8px;overflow:hidden;background:#000;border:1px solid #111}
  .hero img{width:100%;height:100%;object-fit:cover;filter:brightness(.45);transition:opacity .6s;display:none;}
  .hero .overlay{position:absolute;left:0;bottom:40px;width:100%;text-align:center;z-index:2;}
  .hero .buttons{display:flex;justify-content:center;align-items:center;gap:30px;margin-top:10px;}
  .btn{font-weight:700;cursor:pointer;font-size:15px;border:none;border-radius:6px;}
  .btn.mylist, .btn.info{background:transparent;color:#fff;display:flex;flex-direction:column;align-items:center;gap:4px;}
  .btn.mylist i, .btn.info i{font-size:22px;color:#fff;}
  .btn.play{background:#fff;color:#000;padding:10px 26px;display:flex;align-items:center;gap:8px;font-size:16px;border-radius:6px;font-weight:800;}
  .btn.play i{font-size:18px;}

  section{margin-top:22px}
  section h2{color:var(--accent);margin:0 0 10px 4px;}
  .row{display:flex;gap:12px;overflow:auto;padding-bottom:8px;}
  .card{min-width:140px;background:transparent;border-radius:8px;overflow:hidden;cursor:pointer;}
  .card img{width:140px;height:200px;object-fit:cover;border-radius:8px;border:2px solid rgba(255,255,255,.06);}
  .card .meta{margin-top:6px;font-size:13px;color:var(--muted);text-align:center;}

  /* ---- Search Results ---- */
  #searchResults{
    display:none;
    padding:15px;
  }
  #searchResults h2{
    font-size:18px;
    margin-bottom:8px;
  }
  #searchList{
    display:flex;
    gap:12px;
    overflow:auto;
  }

  footer{padding:20px;text-align:center;color:#888;border-top:1px solid #111;margin-top:34px;}

  @media (max-width:720px){
    .hero{height:50vh}
    .btn.play{padding:8px 20px;font-size:14px}
    .btn.mylist i, .btn.info i{font-size:20px}
  }
</style>
</head>
<body>

<header>
  <nav>
    <div class="brand"><div class="Nlogo">N</div></div>

    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="movie.html">Movies</a>
      <a href="series.html">Series</a>
    </div>

    <div class="search-container">
      <button class="search-btn" id="searchToggle">Search</button>
      <input type="text" id="searchInput" placeholder="Search...">
      <div class="profile" id="profileBtn" title="Profile">
        <img src="https://i.ibb.co/sJHpnWNn/IMG-20251107-102917-631.jpg" alt="Profile Avatar">
      </div>
    </div>
  </nav>
</header>


<div class="container">
  <div class="hero" id="hero">
    <img id="heroImg" alt="banner"/>
    <div class="overlay">
      <div class="buttons">
        <button class="btn mylist" id="myListBtn"><i>＋</i><span style="font-size:12px;">My List</span></button>
        <button class="btn play" id="heroPlay"><i>▶</i><span>Play</span></button>
        <button class="btn info" id="heroInfo"><i>ⓘ</i><span style="font-size:12px;">Info</span></button>
      </div>
    </div>
  </div>

  <!-- Search Results Section -->
  <div id="searchResults">
    <h2>Search Results</h2>
    <div id="searchList"></div>
  </div>

  <!-- Category Sections -->
  <section><h2>Top Searches</h2><div class="row" id="topsearchRow"></div></section>
  <section><h2>Films set in India</h2><div class="row" id="indianRow"></div></section>
  <section><h2>Exciting TV Shows</h2><div class="row" id="excitingRow"></div></section>
  <section><h2>Top 10 Movies in Netflix Today</h2><div class="row" id="top10Row"></div></section>
  <section><h2>Only on Netflix</h2><div class="row" id="onlyRow"></div></section>
  <section><h2>Watch Together for Older Kids</h2><div class="row" id="kidsRow"></div></section>
  <section><h2>Dark TV Sci-Fi & Fantasy</h2><div class="row" id="darkRow"></div></section>
  <section><h2>Violent Movies</h2><div class="row" id="violentRow"></div></section>
  <section><h2>TV Sci-Fi & Horror</h2><div class="row" id="horrorRow"></div></section>
  <section><h2>Comedy Movies</h2><div class="row" id="comedyRow"></div></section>
  <section><h2>Bingeworthy TV Shows</h2><div class="row" id="bingeworthyRow"></div></section>
  <section><h2>New on Netflix</h2><div class="row" id="newRow"></div></section>
  <section><h2>East Asian Movies & TV</h2><div class="row" id="asianRow"></div></section>
  <section><h2>Anime</h2><div class="row" id="animeRow"></div></section>
  <section><h2>Docs & Reality TV</h2><div class="row" id="docsRow"></div></section>
  <section><h2>Critically-acclaimed Korean Series</h2><div class="row" id="koreanRow"></div></section>

  <footer>© 2025 NMix Studio — All Rights Reserved</footer>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyC4S_DbJCwOyg2akeBmInBYcuBrPvvVrj8",
  authDomain: "ankmods0.firebaseapp.com",
  databaseURL: "https://ankmods0-default-rtdb.firebaseio.com",
  projectId: "ankmods0",
  storageBucket: "ankmods0.firebasestorage.app",
  messagingSenderId: "760044029682",
  appId: "1:760044029682:web:a5c234e03542c309ce726b"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const heroImg = document.getElementById("heroImg");
const heroPlay = document.getElementById("heroPlay");
const heroInfo = document.getElementById("heroInfo");
const searchToggle = document.getElementById("searchToggle");
const searchInput = document.getElementById("searchInput");
const searchResults = document.getElementById("searchResults");
const searchList = document.getElementById("searchList");

const sections = {
  topsearch: topsearchRow,
  indian: indianRow,
  exciting: excitingRow,
  top10: top10Row,
  only: onlyRow,
  kids: kidsRow,
  dark: darkRow,
  violent: violentRow,
  horror: horrorRow,
  comedy: comedyRow,
  bingeworthy: bingeworthyRow,
  new: newRow,
  asian: asianRow,
  anime: animeRow,
  docs: docsRow,
  korean: koreanRow
};

let bannerItems = [];
let allItems = {};

function makeCard(id, d){
  const c = document.createElement("div");
  c.className = "card";
  const img = document.createElement("img");
  img.src = d.poster || "";
  img.alt = d.title || "";
  img.onclick = ()=> window.location = `details.html?type=${d.type || "movie"}&id=${id}`;
  c.appendChild(img);
  return c;
}

// Fetch movies
onValue(ref(db, "movies"), snap => {
  Object.values(sections).forEach(row => row.innerHTML = "");
  bannerItems = [];

  snap.forEach(s=>{
    const id = s.key;
    const d = s.val();
    allItems[id] = d;
    const cat = (d.category || d.section || "").toLowerCase();

    if(d.banner || d.poster) bannerItems.push({id, ...d});

    for (let key in sections) {
      if (cat.includes(key)) sections[key].appendChild(makeCard(id,d));
    }
  });

  if(bannerItems.length){
    let i = 0;
    const showBanner = ()=>{
      const item = bannerItems[i];
      const imgSrc = item.banner || item.poster || "";
      heroImg.style.opacity = 0;
      if(imgSrc){
        heroImg.src = imgSrc;
        heroImg.style.display = "block";
      } else {
        heroImg.style.display = "none";
      }
      setTimeout(()=>{
        if(item.type === "series"){
          heroPlay.onclick = ()=> window.location = `details.html?type=series&id=${item.id}`;
        } else {
          heroPlay.onclick = ()=> window.location = `player.html?src=${encodeURIComponent(item.video||'')}&title=${encodeURIComponent(item.title||'')}&poster=${encodeURIComponent(item.poster||'')}`;
        }
        heroInfo.onclick = ()=> window.location = `details.html?type=${item.type||'movie'}&id=${item.id}`;
        heroImg.style.opacity = 1;
      },300);
    };
    showBanner();
    setInterval(()=>{
      i = (i+1) % bannerItems.length;
      showBanner();
    },4500);
  }
});

// Toggle search visibility
searchToggle.addEventListener("click", ()=>{
  searchInput.style.display = (searchInput.style.display === "block") ? "none" : "block";
  searchInput.focus();
});

// Search Firebase
searchInput.addEventListener("input", ()=>{
  const val = searchInput.value.trim().toLowerCase();
  if(!val){searchResults.style.display = "none";searchList.innerHTML = "";return;}
  searchList.innerHTML = "";
  searchResults.style.display = "block";
  for(const [id,d] of Object.entries(allItems)){
    if((d.title||"").toLowerCase().includes(val)){
      const c = makeCard(id,d);
      searchList.appendChild(c);
    }
  }
});
</script>
</body>
</html>