<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>NMix — Home</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{--bg:#000;--card:#111;--accent:#e50914;--muted:#8a8a8a}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:#fff}
  header{display:flex;align-items:center;justify-content:space-between;padding:12px 18px;background:linear-gradient(180deg,#080808,rgba(0,0,0,.6));position:sticky;top:0;z-index:40;border-bottom:1px solid #111}
  .brand{display:flex;align-items:center;gap:12px}
  .brand .Nlogo{font-weight:900;color:var(--accent);font-size:28px;margin-right:6px}
  .brand h1{margin:0;font-size:18px;letter-spacing:0.3px}
  nav{display:flex;gap:18px;align-items:center}
  nav a{color:#fff;text-decoration:none;font-weight:700;padding:8px 10px;border-radius:8px;opacity:.95}
  nav a:hover{background:#111}
  .profile{width:36px;height:36px;border-radius:8px;background:#222;display:grid;place-items:center;cursor:pointer}
  .profile img{width:28px;height:28px;border-radius:6px;object-fit:cover}
  .container{padding:14px}
  .hero{position:relative;height:56vh;border-radius:8px;overflow:hidden;background:#000;border:1px solid #111}
  .hero img{width:100%;height:100%;object-fit:cover;filter:brightness(.45);transition:opacity .6s;display:none;}
  .hero .overlay{position:absolute;left:20px;bottom:26px;color:#fff;z-index:2}
  .hero .title{font-size:28px;font-weight:800;margin-bottom:10px}
  .hero .buttons{display:flex;gap:12px}
  .btn{background:#fff;color:#000;border-radius:10px;padding:10px 16px;font-weight:700;cursor:pointer;border:none}
  .btn.secondary{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.12)}
  section{margin-top:22px}
  section h2{color:var(--accent);margin:0 0 10px 4px}
  .row{display:flex;gap:12px;overflow:auto;padding-bottom:8px}
  .card{min-width:140px;background:transparent;border-radius:8px;overflow:hidden;cursor:pointer}
  .card img{width:140px;height:200px;object-fit:cover;border-radius:8px;border:2px solid rgba(255,255,255,.06)}
  .card .meta{margin-top:6px;font-size:13px;color:var(--muted);text-align:center}
  footer{padding:20px;text-align:center;color:#888;border-top:1px solid #111;margin-top:34px}
  @media (max-width:720px){
    .hero{height:50vh}
    .hero .title{font-size:22px}
    .card img{height:180px}
  }
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="Nlogo">N</div>
    <div>
      <h1>NMix</h1>
      <div style="font-size:12px;color:#9a9a9a">AnkMods</div>
    </div>
  </div>
  <nav>
    <a href="index.html">Home</a>
    <a href="movie.html">Movies</a>
    <a href="series.html">Series</a>
    <div class="profile" id="profileBtn" title="Profile">
      <img id="profileImg" src="assets/profile.png" alt="profile"/>
    </div>
  </nav>
</header>

<div class="container">
  <div class="hero" id="hero">
    <img id="heroImg" alt="banner"/>
    <div class="overlay">
      <div class="title" id="heroTitle">Welcome to NMix</div>
      <div class="buttons">
        <button class="btn" id="heroPlay">Play</button>
        <button class="btn secondary" id="heroInfo">More Info</button>
      </div>
    </div>
  </div>

  <!-- Netflix-style categories -->
  <section><h2>Top Searches</h2><div class="row" id="topsearchRow"></div></section>
  <section><h2>Films set in India</h2><div class="row" id="indianRow"></div></section>
  <section><h2>Exciting TV Shows</h2><div class="row" id="excitingRow"></div></section>
  <section><h2>Top 10 Movies in Netflix Today</h2><div class="row" id="top10Row"></div></section>
  <section><h2>Only on Netflix</h2><div class="row" id="onlyRow"></div></section>
  <section><h2>Watch Together for Older Kids</h2><div class="row" id="kidsRow"></div></section>
  <section><h2>Dark TV Sci-Fi & Fantasy</h2><div class="row" id="darkRow"></div></section>
  <section><h2>Violent Movies</h2><div class="row" id="violentRow"></div></section>
  <section><h2>TV Sci-Fi & Horror</h2><div class="row" id="horrorRow"></div></section>
  <section><h2>Comedy Movies</h2><div class="row" id="comedyRow"></div></section>
  <section><h2>Bingeworthy TV Shows</h2><div class="row" id="bingeworthyRow"></div></section>
  <section><h2>New on Netflix</h2><div class="row" id="newRow"></div></section>
  <section><h2>East Asian Movies & TV</h2><div class="row" id="asianRow"></div></section>
  <section><h2>Anime</h2><div class="row" id="animeRow"></div></section>
  <section><h2>Docs & Reality TV</h2><div class="row" id="docsRow"></div></section>
  <section><h2>Critically-acclaimed Korean Series</h2><div class="row" id="koreanRow"></div></section>

  <footer>© 2025 NMix Studio — All Rights Reserved</footer>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyC4S_DbJCwOyg2akeBmInBYcuBrPvvVrj8",
  authDomain: "ankmods0.firebaseapp.com",
  databaseURL: "https://ankmods0-default-rtdb.firebaseio.com",
  projectId: "ankmods0",
  storageBucket: "ankmods0.firebasestorage.app",
  messagingSenderId: "760044029682",
  appId: "1:760044029682:web:a5c234e03542c309ce726b"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const heroImg = document.getElementById("heroImg");
const heroTitle = document.getElementById("heroTitle");
const heroPlay = document.getElementById("heroPlay");

const sections = {
  topsearch: document.getElementById("topsearchRow"),
  indian: document.getElementById("indianRow"),
  exciting: document.getElementById("excitingRow"),
  top10: document.getElementById("top10Row"),
  only: document.getElementById("onlyRow"),
  kids: document.getElementById("kidsRow"),
  dark: document.getElementById("darkRow"),
  violent: document.getElementById("violentRow"),
  horror: document.getElementById("horrorRow"),
  comedy: document.getElementById("comedyRow"),
  bingeworthy: document.getElementById("bingeworthyRow"),
  new: document.getElementById("newRow"),
  asian: document.getElementById("asianRow"),
  anime: document.getElementById("animeRow"),
  docs: document.getElementById("docsRow"),
  korean: document.getElementById("koreanRow")
};

let bannerItems = [];
let allItems = {};

function makeCard(id, d){
  const c = document.createElement("div");
  c.className = "card";
  const img = document.createElement("img");
  img.src = d.poster || "";
  img.alt = d.title||"";
  img.onclick = ()=> {
    const t = d.type === "series" ? "series" : "movie";
    window.location = `details.html?type=${t}&id=${id}`;
  };
  c.appendChild(img);
  const meta = document.createElement("div");
  meta.className = "meta";
  meta.textContent = d.title || "";
  c.appendChild(meta);
  return c;
}

onValue(ref(db,"movies"), snap => {
  Object.values(sections).forEach(row => row.innerHTML = "");
  bannerItems = [];

  snap.forEach(s=>{
    const id = s.key;
    const d = s.val();
    d.type = d.type || "movie";
    allItems[id] = d;

    const cat = (d.category || d.section || "").toLowerCase();

    if(d.banner || d.poster) bannerItems.push({id, ...d});

    for (let key in sections) {
      if (cat.includes(key)) sections[key].appendChild(makeCard(id,d));
    }
  });

  if(bannerItems.length){
    let i = 0;
    const showBanner = ()=>{
      const item = bannerItems[i];
      const imgSrc = item.banner || item.poster || "";
      heroImg.style.opacity = 0;
      if(imgSrc){
        heroImg.src = imgSrc;
        heroImg.style.display = "block";
      } else {
        heroImg.style.display = "none";
      }
      setTimeout(()=>{
        heroTitle.textContent = item.title || "Welcome to NMix";
        heroPlay.onclick = ()=> window.location = `details.html?type=movie&id=${item.id}`;
        heroImg.style.opacity = 1;
      },300);
    };
    showBanner();
    setInterval(()=>{
      i = (i+1) % bannerItems.length;
      showBanner();
    },4500);
  }
});
</script>
</body>
</html>